<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PARMCO Project - App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- 
      Chosen Palette: Calm Neutral
      - bg-stone-50 (Warm Neutral Background)
      - text-stone-800 (Dark, readable text)
      - bg-sky-700 / text-sky-100 (Subtle, calm blue accent)
      - bg-stone-200 (Secondary area background)
    -->
    <!-- 
      Application Structure Plan: 
      A multi-page HTML site. This is the "App" page.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfcfb; /* bg-stone-50 */
            color: #292524; /* text-stone-800 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        html {
            scroll-behavior: smooth;
        }
        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            background-color: rgba(253, 252, 251, 0.8);
        }
        .code-block {
            background-color: #1c1917; /* bg-stone-900 */
            color: #e7e5e4; /* text-stone-200 */
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: monospace;
            font-size: 0.875rem;
        }
        details > summary {
            cursor: pointer;
            padding: 0.75rem 1.5rem;
            background-color: #e7e5e4; /* bg-stone-200 */
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s;
        }
        details > summary:hover {
            background-color: #d6d3d1; /* bg-stone-300 */
        }
        details[open] > summary {
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="sticky-nav border-b border-stone-200">
        <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <span class="text-xl font-bold text-sky-700">PARMCO Project</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="./index.html" class="text-stone-600 hover:text-sky-700 px-3 py-2 rounded-md text-sm font-medium">Overview</a>
                        <a href="./hardware.html" class="text-stone-600 hover:text-sky-700 px-3 py-2 rounded-md text-sm font-medium">Hardware</a>
                        <a href="./server.html" class="text-stone-600 hover:text-sky-700 px-3 py-2 rounded-md text-sm font-medium">Server</a>
                        <a href="./app.html" class="font-bold text-sky-700 px-3 py-2 rounded-md text-sm font-medium" aria-current="page">App</a>
                        <a href="./controller.html" class="text-stone-600 hover:text-sky-700 px-3 py-2 rounded-md text-sm font-medium">Controller</a>
                        <a href="./documentation.html" class="text-stone-600 hover:text-sky-700 px-3 py-2 rounded-md text-sm font-medium">Documents</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- App Section -->
        <section id="app" class="py-16">
            <h2 class="text-3xl font-bold text-center mb-12">The Android Application</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="flex items-center justify-center p-8 bg-stone-200 rounded-lg shadow-inner">
                    <img src="app_screenshot.png" alt="Final App UI" class="rounded-lg shadow-lg" style="max-height: 600px; width: auto;">
                </div>
                <div>
                    <h3 class="text-2xl font-semibold">Key Features (Kotlin)</h3>
                    <p class="mt-4 text-stone-700">The app, written in Kotlin, handles all user interaction and data communication.</p>
                    <ul class="mt-6 space-y-4">
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 flex items-center justify-center rounded-full bg-sky-700 text-white font-bold text-sm">1</div>
                            <p class="ml-4 text-stone-600"><strong class="text-stone-800">Stateful UI:</strong> The "START" button toggles to "STOP", and "Auto" mode disables the manual speed buttons, preventing user error.</p>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 flex items-center justify-center rounded-full bg-sky-700 text-white font-bold text-sm">2</div>
                            <p class="ml-4 text-stone-600"><strong class="text-stone-800">Two-Way Data:</strong> A `sendCommand()` function sends string commands (e.g., `DIR_CW\n`), while a `startReadThread()` listens for and parses incoming RPM (`RPM:...`) and PWM (`PWM:...`) data.</p>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 flex items-center justify-center rounded-full bg-sky-700 text-white font-bold text-sm">3</div>
                            <p class="ml-4 text-stone-600"><strong class="text-stone-800">Robust Connection:</strong> Includes a "Disconnect" button and an automatic-disconnect handler (in the read thread) that fully resets the UI to its initial state.</p>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Code Section -->
        <section id="code" class="py-16 bg-stone-100 rounded-lg">
            <h2 class="text-3xl font-bold text-center mb-12">Final App Code</h2>
            <div class="space-y-4 max-w-4xl mx-auto">
                <details>
                    <summary>Show `MainActivity.kt` (Android App Final Code)</summary>
                    <div class="code-block">
                        <pre><code>
package com.group5.parmco

import android.Manifest
import android.annotation.SuppressLint
import android.bluetooth.BluetoothAdapter
import android.bluetooth.BluetoothDevice
import android.bluetooth.BluetoothManager
import android.bluetooth.BluetoothSocket
import android.content.BroadcastReceiver
import android.content.Context
import android.content.Intent
import android.content.IntentFilter
import android.content.pm.PackageManager
import android.os.Build
import android.os.Bundle
import android.util.Log
import android.view.View
import android.widget.Button
import android.widget.EditText
import android.widget.ProgressBar // NEW IMPORT
import android.widget.TextView
import androidx.activity.result.contract.ActivityResultContracts
import androidx.appcompat.app.AppCompatActivity
import androidx.core.content.ContextCompat
import com.google.android.material.switchmaterial.SwitchMaterial
import java.io.IOException
import java.io.InputStream
import java.io.OutputStream
import java.util.UUID

@SuppressLint("MissingPermission")
class MainActivity : AppCompatActivity() {

    private val tag = "MainActivity"

    companion object {
        private const val RPI_DEVICE_NAME = "group5pi"
        private const val SPP_UUID_STRING = "00001101-0000-1000-8000-00805F9B34FB"
    }

    // --- UI Elements ---
    private lateinit var statusIndicator: View
    private lateinit var statusText: TextView
    private lateinit var connectButton: Button
    private lateinit var connectGroup: View

    // Motor Control UI
    private lateinit var controlsGroup: View
    private lateinit var buttonStartStop: Button
    private lateinit var buttonSpeedDown: Button
    private lateinit var buttonSpeedUp: Button
    private lateinit var switchDirection: SwitchMaterial
    private lateinit var switchMode: SwitchMaterial
    private lateinit var textActualRpm: TextView
    private lateinit var buttonDisconnect: Button
    private lateinit var editDesiredRpm: EditText
    private lateinit var buttonSetRpm: Button
    private lateinit var textDesiredRpm: TextView
    private lateinit var pwmProgressBar: ProgressBar // NEW

    // --- Bluetooth ---
    private var bluetoothAdapter: BluetoothAdapter? = null
    @Volatile private var parmcoSocket: BluetoothSocket? = null
    private var parmcoDevice: BluetoothDevice? = null
    private val sppUuid: UUID = UUID.fromString(SPP_UUID_STRING)
    @Volatile private var outputStream: OutputStream? = null
    private var readThread: Thread? = null

    // --- State ---
    @Volatile private var isMotorRunning = false

    // Permissions
    private val bluetoothPermissions = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {
        arrayOf(
            Manifest.permission.BLUETOOTH_SCAN,
            Manifest.permission.BLUETOOTH_CONNECT,
            Manifest.permission.ACCESS_FINE_LOCATION
        )
    } else {
        arrayOf(
            Manifest.permission.ACCESS_FINE_LOCATION
        )
    }

    // --- Activity Result Launchers ---
    private val requestPermissionLauncher =
        registerForActivityResult(ActivityResultContracts.RequestMultiplePermissions()) { permissions -&gt;
            if (permissions.values.all { it }) {
                logToScreen(getString(R.string.log_permissions_granted))
                startConnectionProcess()
            } else {
                logToScreen(getString(R.string.log_error_permission_denied))
                statusIndicator.setBackgroundResource(R.drawable.status_indicator_denied)
            }
        }

    private val requestEnableBluetoothLauncher =
        registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { result -&gt;
            if (result.resultCode == RESULT_OK) {
                logToScreen(getString(R.string.log_bt_enabled))
                startScan()
            } else {
                logToScreen(getString(R.string.log_error_bt_denied))
                statusIndicator.setBackgroundResource(R.drawable.status_indicator_denied)
            }
        }

    // --- Broadcast Receiver ---
    private val scanReceiver = object : BroadcastReceiver() {
        override fun onReceive(context: Context, intent: Intent) {
            val action: String? = intent.action
            if (BluetoothDevice.ACTION_FOUND == action) {
                val device: BluetoothDevice? = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {
                    intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE, BluetoothDevice::class.java)
                } else {
                    @Suppress("DEPRECATION")
                    intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE)
                }
                device?.let {
                    val deviceName = it.name
                    val deviceAddress = it.address
                    if (deviceName != null) {
                        logToScreen(getString(R.string.log_found_device, deviceName, deviceAddress))
                        if (deviceName.equals(RPI_DEVICE_NAME, ignoreCase = true)) {
                            logToScreen(getString(R.string.log_found_rpi))
                            bluetoothAdapter?.cancelDiscovery()
                            parmcoDevice = it
                            connectToDevice()
                        }
                    }
                }
            } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED == action) {
                logToScreen(getString(R.string.log_scan_finished))
                if (parmcoDevice == null) {
                    logToScreen(getString(R.string.log_error_rpi_not_found, RPI_DEVICE_NAME))
                    statusIndicator.setBackgroundResource(R.drawable.status_indicator_disconnected)
                }
            }
        }
    }

    // --- Activity Lifecycle ---
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        // Initialize UI elements
        statusIndicator = findViewById(R.id.status_indicator)
        statusText = findViewById(R.id.status_text)
        connectButton = findViewById(R.id.connect_button)
        connectGroup = findViewById(R.id.connect_group)
        controlsGroup = findViewById(R.id.controls_group)
        buttonStartStop = findViewById(R.id.button_start_stop)
        buttonSpeedDown = findViewById(R.id.button_speed_down)
        buttonSpeedUp = findViewById(R.id.button_speed_up)
        switchDirection = findViewById(R.id.switch_direction)
        switchMode = findViewById(R.id.switch_mode)
        textActualRpm = findViewById(R.id.text_actual_rpm)
        buttonDisconnect = findViewById(R.id.button_disconnect)
        editDesiredRpm = findViewById(R.id.edit_desired_rpm)
        buttonSetRpm = findViewById(R.id.button_set_rpm)
        textDesiredRpm = findViewById(R.id.text_desired_rpm)
        pwmProgressBar = findViewById(R.id.progress_bar_pwm) // NEW

        // Set initial UI state
        statusText.text = getString(R.string.log_app_started)
        controlsGroup.visibility = View.GONE
        pwmProgressBar.max = 100 // Set max for percentage

        // Get Bluetooth adapter
        val bluetoothManager = getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager
        bluetoothAdapter = bluetoothManager.adapter
        if (bluetoothAdapter == null) {
            logToScreen("FATAL: Bluetooth not supported on this device.\n")
            connectButton.isEnabled = false
            return
        }

        // --- Set Click Listeners ---
        connectButton.setOnClickListener {
            logToScreen(getString(R.string.log_connect_clicked))
            parmcoDevice = null
            checkPermissionsAndConnect()
        }
        buttonStartStop.setOnClickListener {
            isMotorRunning = !isMotorRunning
            buttonStartStop.text = if (isMotorRunning) "STOP" else "START"
            sendCommand("START_STOP")
        }
        buttonSpeedUp.setOnClickListener {
            sendCommand("SPEED_UP")
            if (switchMode.isChecked) {
                switchMode.isChecked = false
            }
        }
        buttonSpeedDown.setOnClickListener {
            sendCommand("SPEED_DOWN")
            if (switchMode.isChecked) {
                switchMode.isChecked = false
            }
        }
        switchDirection.setOnCheckedChangeListener { _, isChecked -&gt;
            sendCommand(if (isChecked) "DIR_CCW" else "DIR_CW")
        }
        switchMode.setOnCheckedChangeListener { _, isChecked -&gt;
            if (isChecked) {
                buttonSpeedUp.isEnabled = false
                buttonSpeedDown.isEnabled = false
                sendCommand("MODE_AUTO")
            } else {
                buttonSpeedUp.isEnabled = true
                buttonSpeedDown.isEnabled = true
                sendCommand("MODE_MANUAL")
            }
        }
        buttonDisconnect.setOnClickListener { disconnect() }

        buttonSetRpm.setOnClickListener {
            val rpmString = editDesiredRpm.text.toString()
            if (rpmString.isNotEmpty()) {
                sendCommand("SET_RPM:$rpmString")
                textDesiredRpm.text = rpmString
                if (!switchMode.isChecked) {
                    switchMode.isChecked = true
                }
            } else {
                logToScreen("Please enter a desired RPM.\n")
            }
        }

        // Register the broadcast receiver
        val filter = IntentFilter(BluetoothDevice.ACTION_FOUND)
        filter.addAction(BluetoothAdapter.ACTION_DISCOVERY_FINISHED)
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {
            registerReceiver(scanReceiver, filter, RECEIVER_EXPORTED)
        } else {
            @Suppress("DEPRECATION")
            registerReceiver(scanReceiver, filter)
        }
    }

    override fun onDestroy() {
        super.onDestroy()
        unregisterReceiver(scanReceiver)
        disconnect()
    }

    private fun logToScreen(message: String) {
        statusText.append(message)
        Log.d(tag, message)
    }

    // --- Permission and Scan Logic (Unchanged) ---
    private fun checkPermissionsAndConnect() {
        val permissionsToRequest = bluetoothPermissions.filter {
            ContextCompat.checkSelfPermission(this, it) != PackageManager.PERMISSION_GRANTED
        }
        if (permissionsToRequest.isEmpty()) {
            logToScreen(getString(R.string.log_permissions_good))
            startConnectionProcess()
        } else {
            val permsString = permissionsToRequest.joinToString()
            logToScreen(getString(R.string.log_requesting_permissions, permsString))
            requestPermissionLauncher.launch(permissionsToRequest.toTypedArray())
        }
    }
    private fun startConnectionProcess() {
        if (bluetoothAdapter?.isEnabled == false) {
            logToScreen(getString(R.string.log_bt_off))
            val enableBtIntent = Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE)
            requestEnableBluetoothLauncher.launch(enableBtIntent)
        } else {
            logToScreen(getString(R.string.log_bt_on))
            startScan()
        }
    }
    private fun startScan() {
        if (bluetoothAdapter?.isDiscovering == true) {
            bluetoothAdapter?.cancelDiscovery()
        }
        logToScreen(getString(R.string.log_scan_starting))
        statusIndicator.setBackgroundResource(R.drawable.status_indicator_connecting)
        bluetoothAdapter?.startDiscovery()
    }

    // --- Command/Disconnect Logic (Unchanged) ---
    private fun sendCommand(command: String) {
        val outStream = outputStream
        if (outStream == null) {
            logToScreen("ERROR: Not connected. Cannot send command.\n")
            return
        }
        Thread {
            try {
                outStream.write("$command\n".toByteArray())
                runOnUiThread { logToScreen("Sent: $command\n") }
            } catch (e: IOException) {
                Log.e(tag, "Error sending command", e)
                disconnect()
            }
        }.start()
    }

    // --- MODIFIED: Disconnect Function ---
    private fun disconnect() {
        if (parmcoSocket == null) return
        val socket = parmcoSocket
        val outStream = outputStream
        parmcoSocket = null
        outputStream = null
        isMotorRunning = false

        try {
            readThread?.interrupt()
            outStream?.close()
            socket?.close()
        } catch (e: IOException) {
            Log.e(tag, "Error closing socket", e)
        }

        runOnUiThread {
            logToScreen("Disconnected.\n")
            statusIndicator.setBackgroundResource(R.drawable.status_indicator_denied)
            controlsGroup.visibility = View.GONE
            connectGroup.visibility = View.VISIBLE
            buttonStartStop.text = "START"
            textActualRpm.text = "--"
            textDesiredRpm.text = "--"
            pwmProgressBar.progress = 0 // NEW: Reset progress bar

            switchMode.isChecked = false
            buttonSpeedUp.isEnabled = true
            buttonSpeedDown.isEnabled = true
        }
    }

    // --- MODIFIED: Thread to read and parse RPM/PWM data ---
    private fun startReadThread() {
        readThread = Thread {
            val inputStream = parmcoSocket?.inputStream
            try {
                inputStream?.bufferedReader()?.use { reader -&gt;
                    while (parmcoSocket != null &amp;&amp; !Thread.currentThread().isInterrupted) {
                        val line = reader.readLine()
                        if (line == null) {
                            break
                        }

                        // Check for RPM data
                        if (line.startsWith("RPM:")) {
                            val rpmValue = line.substringAfter("RPM:").trim()
                            runOnUiThread {
                                textActualRpm.text = rpmValue
                            }
                        }
                        // NEW: Check for PWM data
                        else if (line.startsWith("PWM:")) {
                            val pwmString = line.substringAfter("PWM:").trim()
                            val pwmValue = pwmString.toIntOrNull() ?: 0
                            // Calculate percentage (0-255 -> 0-100)
                            val pwmPercent = (pwmValue * 100) / 255
                            runOnUiThread {
                                pwmProgressBar.progress = pwmPercent
                            }
                        }
                    }
                }
            } catch (e: IOException) {
                Log.w(tag, "Connection lost (read failed): ${e.message}")
            }
            disconnect()
        }
        readThread?.start()
    }


    // --- Connection Logic (Unchanged) ---
    private fun connectToDevice() {
        Thread {
            try {
                runOnUiThread {
                    logToScreen(getString(R.string.log_creating_socket))
                }
                val method = parmcoDevice?.javaClass?.getMethod(
                    "createRfcommSocket",
                    Int::class.javaPrimitiveType
                )
                parmcoSocket = method?.invoke(parmcoDevice, 1) as BluetoothSocket
                parmcoSocket?.connect()
                outputStream = parmcoSocket?.outputStream
                startReadThread()
                runOnUiThread {
                    logToScreen(getString(R.string.log_connected_success))
                    statusIndicator.setBackgroundResource(R.drawable.status_indicator_connected)
                    controlsGroup.visibility = View.VISIBLE
                    connectGroup.visibility = View.GONE
                }
            } catch (e: Exception) {
                val errorMsg = e.message ?: "Unknown Exception"
                runOnUiThread {
                    logToScreen(getString(R.string.log_error_connection_failed, errorMsg))
                    statusIndicator.setBackgroundResource(R.drawable.status_indicator_denied)
                }
                try {
                    parmcoSocket?.close()
                } catch (closeException: IOException) {
                    val closeMsg = closeException.message ?: "Unknown close exception"
                    runOnUiThread {
                        logToScreen(getString(R.string.log_error_socket_close, closeMsg))
                    }
                }
            }
        }.start()
    }
}
                        </code></pre>
                    </div>
                </details>

                <details>
                    <summary>Show `activity_main.xml` (Android App Layout)</summary>
                    <div class="code-block">
                        <pre><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"&gt;

    &lt;!-- Status Indicator --&gt;
    &lt;View
        android:id="@+id/status_indicator"
        android:layout_width="32dp"
        android:layout_height="32dp"
        android:layout_marginTop="24dp"
        android:background="@drawable/status_indicator_disconnected"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;!-- Guideline --&gt;
    &lt;androidx.constraintlayout.widget.Guideline
        android:id="@+id/horizontal_guideline"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        app:layout_constraintGuide_percent="0.75" /&gt;

    &lt;!-- Connection Group --&gt;
    &lt;androidx.constraintlayout.widget.ConstraintLayout
        android:id="@+id/connect_group"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginStart="16dp"
        android:layout_marginEnd="16dp"
        app:layout_constraintBottom_toTopOf="@+id/horizontal_guideline"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/status_indicator"
        app:layout_constraintVertical_bias="0.5"&gt;

        &lt;Button
            android:id="@+id/connect_button"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="@string/connect_button_text"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;

    &lt;!-- Motor Controls Group --&gt;
    &lt;androidx.constraintlayout.widget.ConstraintLayout
        android:id="@+id/controls_group"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginStart="16dp"
        android:layout_marginEnd="16dp"
        android:layout_marginTop="8dp"
        android:layout_marginBottom="8dp"
        android:visibility="gone"
        app:layout_constraintBottom_toTopOf="@+id/horizontal_guideline"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/status_indicator"
        tools:visibility="visible"&gt;

        &lt;Button
            android:id="@+id/button_start_stop"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="START"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent" /&gt;

        &lt;Button
            android:id="@+id/button_speed_down"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:layout_marginEnd="4dp"
            android:text="Speed -"
            app:layout_constraintEnd_toStartOf="@+id/button_speed_up"
            app:layout_constraintHorizontal_bias="0.5"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/button_start_stop" /&gt;

        &lt;Button
            android:id="@+id/button_speed_up"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginStart="4dp"
            android:text="Speed +"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintHorizontal_bias="0.5"
            app:layout_constraintStart_toEndOf="@+id/button_speed_down"
            app:layout_constraintTop_toTopOf="@+id/button_speed_down" /&gt;

        &lt;com.google.android.material.switchmaterial.SwitchMaterial
            android:id="@+id/switch_direction"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:text="Direction (OFF=CW, ON=CCW)"
            android:textSize="16sp"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/button_speed_down" /&gt;

        &lt;com.google.android.material.switchmaterial.SwitchMaterial
            android:id="@+id/switch_mode"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:text="Mode (OFF=Manual, ON=Auto)"
            android:textSize="16sp"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/switch_direction" /&gt;

        &lt;TextView
            android:id="@+id/label_actual_rpm"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp"
            android:text="Actual RPM: "
            android:textSize="18sp"
            android:textStyle="bold"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/switch_mode" /&gt;

        &lt;TextView
            android:id="@+id/text_actual_rpm"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="--"
            android:textSize="18sp"
            app:layout_constraintBottom_toBottomOf="@+id/label_actual_rpm"
            app:layout_constraintStart_toEndOf="@+id/label_actual_rpm"
            app:layout_constraintTop_toTopOf="@+id/label_actual_rpm" /&gt;

        &lt;TextView
            android:id="@+id/label_desired_rpm"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:text="Desired RPM: "
            android:textSize="18sp"
            android:textStyle="bold"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/label_actual_rpm" /&gt;

        &lt;TextView
            android:id="@+id/text_desired_rpm"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="--"
            android:textSize="18sp"
            app:layout_constraintBottom_toBottomOf="@+id/label_desired_rpm"
            app:layout_constraintStart_toEndOf="@+id/label_desired_rpm"
            app:layout_constraintTop_toTopOf="@+id/label_desired_rpm" /&gt;

        &lt;!-- NEW: Duty Cycle Label --&gt;
        &lt;TextView
            android:id="@+id/label_duty_cycle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp"
            android:text="Duty Cycle (0-100%):"
            android:textSize="16sp"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/label_desired_rpm" /&gt;

        &lt;!-- NEW: Progress Bar --&gt;
        &lt;ProgressBar
            android:id="@+id/progress_bar_pwm"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:max="100"
            android:progress="0"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/label_duty_cycle" /&gt;

        &lt;EditText
            android:id="@+id/edit_desired_rpm"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp"
            android:layout_marginEnd="8dp"
            android:hint="Set Target RPM"
            android:inputType="number"
            app:layout_constraintEnd_toStartOf="@+id/button_set_rpm"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/progress_bar_pwm" /&gt;

        &lt;Button
            android:id="@+id/button_set_rpm"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Set"
            app:layout_constraintBottom_toBottomOf="@+id/edit_desired_rpm"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="@+id/edit_desired_rpm" /&gt;

        &lt;Button
            android:id="@+id/button_disconnect"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:text="@string/disconnect_button_text"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/edit_desired_rpm" /&gt;

    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;

    &lt;ScrollView
        android:id="@+id/log_scroller"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_margin="16dp"
        android:background="#ECECEC"
        android:padding="8dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/horizontal_guideline"&gt;

        &lt;TextView
            android:id="@+id/status_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:fontFamily="monospace"
            android:textColor="#000000"
            android:textSize="12sp"
            tools:text="Log will appear here..." /&gt;

    &lt;/ScrollView&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
                        </code></pre>
                    </div>
                </details>
            </div>
        </section>

    </main>

    <footer class="text-center py-8 border-t border-stone-200">
        <p class="text-stone-500">ECSE 4235 Final Project - Group 5: Liam Dabelstein & Jake VanEssendelft</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // This page only contains code blocks, no other JS is needed.
        });
    </script>
</body>
</html>
